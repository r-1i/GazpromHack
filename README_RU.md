# 🎴 GazpromHack - Карточная игра с принятием решений

<div align="center">

[![Играть](https://img.shields.io/badge/🎮_PLAY_GAME_NOW-4CAF50?style=for-the-badge&logoColor=white)](https://r-1i.github.io/GazpromHackathon-Stories-Builds/)
![Unity](https://img.shields.io/badge/Unity-2022.3.46f1-black?style=for-the-badge&logo=unity)
![C#](https://img.shields.io/badge/C%23-Язык-239120?style=for-the-badge&logo=c-sharp)
![Platform](https://img.shields.io/badge/Платформа-WebGL-blue?style=for-the-badge)
![Status](https://img.shields.io/badge/Статус-Прототип-orange?style=for-the-badge)

**[🇬🇧 English Version](README.md)**

*Интерактивная карточная игра, где каждый свайп формирует вашу судьбу*

[📖 Обзор] • [🚀 Быстрый старт] • [⚙️ Архитектура] • [🎯 Функционал] • [📈 Планы]

</div>

---

## 📖 Обзор проекта

<table>
<tr>
<td>

Истории — это **игра о принятии решений**, созданная для хакатона Газпром, вдохновлённая популярной мобильной игрой "Reigns". Игроки проходят через истории клиентов Газпромбанка, принимая важные жизненные решения свайпами карт влево или вправо.

Каждое решение влияет на **четыре ключевых жизненных параметра**:
- 💗 **Настроение** - Эмоциональное благополучие
- 👨‍👩‍👧 **Семья** - Семейные отношения
- 💰 **Деньги** - Финансовое состояние
- 📊 **Инвестиции** - Долгосрочное планирование

</td>
<td width="40%">

### 🎮 Краткие данные

| | |
|---|---|
| **Тип** | Мобильная карточная игра |
| **Жанр** | Симулятор решений, Нарратив |
| **Платформа** | WebGL |
| **Карт** | 54 уникальных сценария |
| **Статус** | ✅ Играбельное демо |
| **Разработка** | 48-72ч |

</td>
</tr>
</table>

> 💡 **Основная идея**: Игроки осваивают финансовые решения через увлекательный игровой процесс — это одновременно обучение и развлечение.

---

## 🛠️ Стек технологий

<table>
<tr>
<td width="50%">

### 🎮 Игровой движок
- **Unity 2022.3.46f1 LTS**
- Язык программирования **C#**
- **Unity 2D Feature Set 2.0.1**

### 📦 Unity пакеты
- **TextMesh Pro 3.0.6** - Типографика
- **Unity UI (uGUI) 1.0.0** - Интерфейс
- **Unity Timeline 1.7.6** - Анимация

</td>
<td width="50%">

### 🔧 Сторонние библиотеки
- **DOTween (Demigiant)** - Система анимации
  - Плавные переходы карт
  - Функции сглаживания

### 🏗️ Архитектурные паттерны
- ✅ Singleton Pattern
- ✅ Event Bus Pattern
- ✅ Observer Pattern
- ✅ Factory Pattern

</td>
</tr>
</table>

---

## ⚙️ Архитектура и дизайн

### 🎯 Обзор системы

```
┌─────────────────┐
│   JSON карты    │ ← 54 определения карт
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  CardSpawner    │ ← Управление колодой
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ SwipeDetector   │ ← Взаимодействие с игроком
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   Event Bus     │ ← Связь между системами
└────────┬────────┘
         │
         ├─────────────┬──────────────┐
         ▼             ▼              ▼
┌──────────────┐ ┌──────────┐ ┌────────────────┐
│ Обновление   │ │ Обновл.  │ │ Добавление     │
│ параметров   │ │ UI       │ │ след. карты    │
└──────────────┘ └──────────┘ └────────────────┘
```

### 🏛️ Основные компоненты

<details>
<summary><b>1. 📡 Event-Driven архитектура</b></summary>

**Собственная система Event Bus** для развязанной коммуникации компонентов:

```csharp
EventBus → EventBusHolder (Singleton)
    ↓
События:
    - OnDestroyCardEvent (свайп карты)
    - SetParametersEvent (изменение параметров)
```

**Преимущества:**
- ✅ Слабая связанность систем
- ✅ Легкое добавление функций
- ✅ Понятный поток данных
- ✅ Высокая тестируемость

</details>

<details>
<summary><b>2. 🎴 Архитектура системы карт</b></summary>

**Поток данных:**
```
JSON файлы → Десериализация → SwipeDetector → Event Bus → Действия
```

**Структура карты:**
- Два выбора на карту (свайп влево/вправо)
- Три возможных исхода (позитивный, негативный, нейтральный)
- Настраиваемые вероятности исходов
- Эффекты изменения параметров
- Ветвящиеся нарративные пути

</details>

<details>
<summary><b>3. 💾 Управление состоянием игры</b></summary>

**Постоянные настройки:**
- `SceneLoadValues` сохраняется между сценами
- Несколько цветовых схем (Малевич/Газпром)
- Режим отладки с отображением ID карт

**Система параметров:**
- Диапазон: 0-100 для каждого параметра
- Обновления в реальном времени через события
- Плавные визуальные переходы

</details>

<details>
<summary><b>4. 🔄 Динамическое управление колодой</b></summary>

**Умный спавн карт:**
- Начальная колода из "стартовых" карт
- Динамическая вставка карт в определённые позиции
- Предотвращение повторов карт
- Запасная случайная генерация (режим долгой игры)

</details>

### 🎨 Паттерны проектирования в действии

| Паттерн | Реализация | Назначение |
|---------|------------|-----------|
| **Singleton** | `UIController`, `EventBusHolder` | Глобальный доступ к менеджерам |
| **Observer** | Слушатели Event Bus | Обновление параметров |
| **Factory** | Создание карт из JSON | Динамическое создание контента |
| **Strategy** | Типы исходов (pos/neg/neu) | Гибкие результаты решений |

---

## 🎯 Функционал

### 🎮 Основной игровой цикл

```
1. 🎴 Появляется карта (анимация DOTween)
2. 👆 Игрок свайпает (решение влево/вправо)
3. 🎲 Разрешается исход (на основе вероятности)
4. 📊 Обновляются параметры (Event Bus)
5. ➕ Добавляется следующая карта (динамическая колода)
6. 🔄 Цикл продолжается
```

### ✨ Ключевые особенности

#### 1. 👆 Механика свайпа

<table>
<tr>
<td width="50%">

**Визуальная обратная связь:**
- 🔄 Вращение карты (±15°)
- 💬 Всплытие пузырей выбора
- ↩️ Плавный возврат при коротком свайпе
- 🚀 Анимация вылета

</td>
<td width="50%">

**Технические детали:**
- Порог: минимум 200px
- Физическое движение
- Совместимость тач и мыши
- Плавное сглаживание DOTween

</td>
</tr>
</table>

#### 2. 📊 Система параметров

| Параметр | Иконка | Цвет | Значение |
|----------|--------|------|----------|
| Настроение | 💗 | 🔴 Красный | Эмоциональное благополучие |
| Семья | 👨‍👩‍👧 | 🟡 Жёлтый | Семейные отношения |
| Деньги | 💰 | 🟢 Зелёный | Финансовое состояние |
| Инвестиции | 📊 | 🔵 Синий | Долгосрочное планирование |

**Механика:**
- ✅ Диапазон 0-100 с ограничением
- ✅ Немедленное визуальное обновление
- ✅ Представление шкалой заполнения
- ✅ Цветовая обратная связь

#### 3. 📦 Система контента

**54 карты в JSON** с богатыми данными:

```json
{
  "id": 10,
  "is_start": true,
  "name": "Обучающая карта",
  "description": "Ситуация на карте...",
  "properties_yes": {
    "text": "Правый выбор",
    "pos": {
      "id_next": 300,
      "moves_next": 1,
      "chance": 0.7,
      "properties": {"mood": 5, "money": -10}
    }
  }
}
```

**Возможности карт:**
- ✅ Уникальные сценарии персонажей
- ✅ Пользовательские спрайты персонажей
- ✅ Ветвящиеся нарративы
- ✅ Эффекты параметров
- ✅ Исходы на основе вероятности

#### 4. 🎨 Визуальная кастомизация

**Две отдельные темы:**
- 🎨 **Малевич** - Художественный стиль супрематизма
- 🏢 **Газпром** - Корпоративные брендовые цвета

**Дополнительные опции:**
- 🐛 Режим отладки (показывать ID карт)
- 📱 Адаптивный UI (несколько разрешений)
- ♾️ Переключатель режима долгой игры

#### 5. 🔗 Специальные функции

| Функция | Описание |
|---------|----------|
| 🌐 **Внешняя ссылка** | Карта с ID -122 открывает сайт Газпромбанка |
| 🏁 **Множественные концовки** | Специальные ID запускают разные заключения |
| 🎲 **Динамический контент** | Режим запасной случайной генерации |

---

## 🚧 Вызовы и ограничения

### ✅ Преодолённые технические вызовы

| Вызов | Решение |
|-------|---------|
| ⚡ Синхронизация событий | Интеграция callback DOTween |
| 🎴 Управление колодой | Собственный алгоритм вставки |
| 📱 Отзывчивость UI | Система пропорционального масштабирования |
| 🎬 Плавные анимации | Функции сглаживания DOTween |

<details>
<summary><b>📝 Ограничения контента</b></summary>

- 🌍 **Только русский** - Нет локализации
- 🎨 **Ограниченные спрайты** - Оптимизация для размера

</details>


## 🚀 Как запустить

### 📋 Предварительные требования

<table>
<tr>
<td width="50%">

**Необходимое ПО:**
- ✅ Unity Hub
- ✅ Unity 2022.3.46f1 LTS
- ✅ Минимум 4GB RAM
- ✅ 2GB места на диске

</td>
<td width="50%">

**Поддерживаемые платформы:**
- 🪟 Windows 10/11
- 🍎 macOS 10.14+
- 🐧 Ubuntu 20.04+

</td>
</tr>
</table>

### ⚙️ Инструкция по установке

**Шаг 1: Клонировать проект**
```bash
git clone https://github.com/r-1i/GazpromHack.git
cd GazpromHack
```

**Шаг 2: Открыть в Unity Hub**
1. Запустите Unity Hub
2. Нажмите **"Add" → "Add project from disk"**
3. Перейдите в папку `GazpromHack`
4. Unity Hub автоматически определит версию
5. Установите Unity 2022.3.46f1, если будет предложено
6. Откройте проект

**Шаг 3: Проверить настройку**
- ⏱️ Подождите 2-5 минут импорта
- ✅ Проверьте Console на ошибки
- ✅ Убедитесь, что DOTween в `Assets/Plugins/Demigiant`

> 📦 **Отсутствует DOTween?** Скачайте бесплатно из Unity Asset Store

### ▶️ Запуск игры

**Игра в редакторе:**
1. Откройте `Assets/Scenes/MainMenu`
2. Нажмите кнопку **Play** (▶️)
3. Свайпайте карты мышью


### 🎛️ Конфигурация

**Опции MainMenu:**
- 🎨 Выбор цветовой схемы
- 🐛 Переключение отображения ID карт

**Расширенные (Inspector):**
- ♾️ Булево `longGame`
- 📝 Редактирование JSON в `Assets/Resources/Cards/`

---

## 📂 Структура проекта

```
GazpromHack/
│
├── 📁 Assets/
│   ├── 🖼️ Sprites/              # UI и спрайты персонажей
│   ├── 🎨 Font/                 # Типографические ассеты
│   ├── 📦 Prefabs/              # Префаб карты
│   ├── 🗂️ Resources/
│   │   ├── 🎴 Cards/            # 54 JSON файла карт
│   │   └── 🖼️ Images/           # Спрайты персонажей
│   │
│   ├── 🎬 Scenes/
│   │   ├── MainMenu.unity       # 🏠 Сцена меню
│   │   └── SampleScene.unity    # 🎮 Игровая сцена
│   │
│   ├── 📜 Scripts/
│   │   ├── CardJson.cs          # 📋 Структуры данных
│   │   ├── CardSpawner.cs       # 🎲 Логика колоды
│   │   ├── SwipeDetector.cs     # 👆 Обработка ввода
│   │   ├── ParametersListener.cs # 📊 Отслеживание статов
│   │   ├── UIController.cs      # 🎨 Управление UI
│   │   ├── MainMenu.cs          # 🏠 Логика меню
│   │   ├── SceneLoadValues.cs   # 💾 Персистентность
│   │   └── EventBus/            # 📡 Система событий
│   │
│   └── 🔌 Plugins/
│       └── Demigiant/           # Библиотека DOTween
│
├── 📦 Packages/                 # Unity пакеты
├── ⚙️ ProjectSettings/          # Конфигурация Unity
└── 📖 README.md
```

---

## 📈 Будущие улучшения

### 🔴 Высокий приоритет

<table>
<tr>
<td width="33%">

#### 🎮 Игровой дизайн
- ✅ Условия победы/поражения
- ✅ Концовки по параметрам
- ✅ Система сохранения/загрузки
- ✅ Система обучения
- ✅ Множественные концовки

</td>
<td width="33%">

#### 💻 Техническая часть
- ✅ Рефакторинг логики вероятностей
- ✅ ScriptableObject конфиги
- ✅ Надёжная обработка ошибок
- ✅ Покрытие юнит-тестами
- ✅ Профилирование производительности

</td>
<td width="33%">

#### 📝 Контент
- ✅ 100+ карт
- ✅ Категории карт
- ✅ Арки персонажей
- ✅ Сезонные события
- ✅ Сюжетные ветки

</td>
</tr>
</table>

### 🟡 Средний приоритет

<details>
<summary><b>✨ Полировка и UX</b></summary>

**Аудио система:**
- 🎵 Фоновая музыка
- 🔊 Звуки свайпа карт
- 📊 Звуки изменения параметров
- 🌆 Эмбиент аудио

**Визуальные эффекты:**
- ✨ Системы частиц
- 📳 Тряска экрана
- 💫 Эффекты свечения
- 🎬 Разнообразие анимаций

**Доступность:**
- 📏 Опции размера текста
- 🎨 Режим для дальтоников
- ⚙️ Настройки сложности

</details>

<details>
<summary><b>🌐 Социальные функции</b></summary>

- 🏆 Таблицы лидеров
- 📅 Ежедневные испытания
- 📱 Публикация в соцсетях

</details>

### 🟢 Долгосрочное видение

| Категория | Функции |
|-----------|---------|
| 🤖 **Продвинутые** | AI генерация карт, Поддержка модов, Аналитика |
| 🌍 **Платформы** | Web версия, Портирование на консоли, Релиз в Steam |
| 💼 **Бизнес** | Интеграция с банком, Финансовое образование, Партнёрства |

---

## 💡 Извлечённые уроки

### 🎯 Что получилось хорошо

| Успех | Влияние |
|-------|---------|
| ⚡ **Быстрое прототипирование** | Доставлено в сроки хакатона |
| 🏗️ **Event архитектура** | Легко расширять функции |
| 📋 **Data-Driven дизайн** | Непрограммисты могут добавлять карты |
| ✨ **Интеграция DOTween** | Достигнут профессиональный вид |
| 📐 **Структура кода** | Поддерживаемый код несмотря на скорость |

### 🚀 Области роста

```
✅ Тестирование → Начинать с юнит-тестов с первого дня
✅ Конфигурация → Избегать хардкода с самого начала
✅ Git          → Более частые, описательные коммиты
✅ Документация → Комментарии к коду и диаграммы
✅ Производ-ть → Оптимизация под мобильные с старта
```

---

## 🎓 Заключение

</table>

> 💎 **Ключевой вывод**: Этот проект демонстрирует способность создавать отполированный, играбельный игровой прототип в условиях хакатона, сохраняя чистую архитектуру поддерживая качество кода.

### 💬 Темы для обсуждения

Готов обсудить:
- 🏗️ Архитектурные решения и компромиссы
- 📈 Масштабирование для продакшн релиза
- 🔧 Детали технической реализации
- 👥 Подходы к командной работе

---

## 📞 Контакты

<div align="center">

[![GitHub](https://img.shields.io/badge/GitHub-r--1i-black?style=for-the-badge&logo=github)](https://github.com/r-1i)
[![Project](https://img.shields.io/badge/Проект-GazpromHack-blue?style=for-the-badge&logo=unity)](https://github.com/r-1i/GazpromHack)

**[⬆ Вернуться к началу](#-gazpromhack---карточная-игра-с-принятием-решений)**

</div>

---

## 📊 Технические спецификации

<details>
<summary><b>📦 Зависимости</b></summary>

**Обязательные:**
- Unity 2022.3 LTS или выше
- DOTween (бесплатная версия)
- TextMesh Pro (включен)

</details>

---

<div align="center">

**⭐ Поставьте звезду этому проекту, если он вам интересен!**

*Сделано с ❤️ во время хакатона Газпром*

**Последнее обновление:** Ноябрь 2025  
**Статус:** ✅ Играбельный прототип

</div>
